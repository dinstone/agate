import{d as e,r as l,z as a,s as u,B as d,o as t,i as o,w as n,e as r,c as p,L as s,K as m,J as i,Q as c,ao as f,a as b,p as v,l as _,f as V,_ as g}from"./index-3c676471.js";const k=e=>(v("data-v-b5030ce8"),e=e(),_(),e),h=k((()=>V("div",{class:"card-header"},[V("span",null,"基本信息")],-1))),y=k((()=>V("div",{class:"card-header"},[V("span",null,"前端信息")],-1))),U=k((()=>V("div",{class:"card-header"},[V("span",null,"后端信息")],-1))),x=k((()=>V("div",{class:"el-form-item__label"},"请求参数名称",-1))),P=k((()=>V("div",{class:"el-form-item__label"},"请求参数类型",-1))),E=k((()=>V("div",{class:"el-form-item__label"},"路由参数名称",-1))),T=k((()=>V("div",{class:"el-form-item__label"},"路由参数类型",-1))),R=k((()=>V("div",{class:"card-header"},[V("span",null,"插件配置")],-1))),w=k((()=>V("div",{class:"el-form-item__label"},"插件名称",-1))),A=k((()=>V("div",{class:"el-form-item__label"},"插件类型",-1))),C=k((()=>V("div",{class:"el-form-item__label"},"插件序号",-1))),D=k((()=>V("div",{class:"el-form-item__label"},"插件配置",-1))),H=g(e({__name:"Write",props:{model:{type:Object,default:()=>({frontend:{},backend:{urls:[""],params:[]},plugins:[]})}},setup(e,{expose:v}){const _=e,V=l(_.model);a((()=>_.model),(e=>{e&&(V.value=Object.assign(b(V),e))}),{deep:!0,immediate:!0});const g=[{label:"ALL",value:""},{label:"GET",value:"GET"},{label:"PUT",value:"PUT"},{label:"POST",value:"POST"},{label:"DELET",value:"DELETE"}],k=u({name:[{required:!0,message:"Please input Route name",trigger:"blur"},{min:3,max:150,message:"Length should be 3 to 150",trigger:"blur"}],"frontend.path":[{required:!0,message:"Please input Route Path",trigger:"blur"}],"backend.urls":[{required:!0,message:"Please input Route Path",trigger:"blur"}],"backend.type":[{required:!0,message:"Please select Service type",trigger:"blur"}]}),H=l();v({submitForm:async()=>{const e=b(H);if(await(null==e?void 0:e.validate().catch((e=>{}))))return V.value},resetForm:()=>{const e=b(H);e&&e.resetFields()}});return(e,l)=>{const a=d("el-input"),u=d("el-form-item"),b=d("el-card"),v=d("el-option"),_=d("el-select"),O=d("el-radio"),q=d("el-radio-group"),L=d("el-col"),Q=d("el-button"),F=d("el-row"),N=d("el-input-number"),Y=d("el-divider"),j=d("el-space"),S=d("el-form");return t(),o(S,{ref_key:"formElRef",ref:H,model:V.value,rules:k,"label-width":"90px",class:"demo-form-inline","status-icon":""},{default:n((()=>[r(j,{fill:!0,wrap:""},{default:n((()=>[r(b,{class:"box-card"},{header:n((()=>[h])),default:n((()=>[r(u,{label:"路由名称",prop:"name"},{default:n((()=>[r(a,{modelValue:V.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>V.value.name=e)},null,8,["modelValue"])])),_:1}),r(u,{label:"路由备注",prop:"remark"},{default:n((()=>[r(a,{modelValue:V.value.remark,"onUpdate:modelValue":l[1]||(l[1]=e=>V.value.remark=e),type:"textarea",maxlength:"100","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1}),r(b,{class:"box-card"},{header:n((()=>[y])),default:n((()=>[r(u,{label:"请求路径",prop:"frontend.path"},{default:n((()=>[r(a,{modelValue:V.value.frontend.path,"onUpdate:modelValue":l[2]||(l[2]=e=>V.value.frontend.path=e)},null,8,["modelValue"])])),_:1}),r(u,{label:"请求方法",prop:"frontend.method"},{default:n((()=>[r(_,{modelValue:V.value.frontend.method,"onUpdate:modelValue":l[3]||(l[3]=e=>V.value.frontend.method=e),fill:!0},{default:n((()=>[(t(),p(m,null,s(g,((e,l)=>r(v,{key:l,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),r(u,{label:"消费类型",prop:"frontend.consumes"},{default:n((()=>[r(a,{modelValue:V.value.frontend.consumes,"onUpdate:modelValue":l[4]||(l[4]=e=>V.value.frontend.consumes=e)},null,8,["modelValue"])])),_:1}),r(u,{label:"生产类型",prop:"frontend.produces"},{default:n((()=>[r(a,{modelValue:V.value.frontend.produces,"onUpdate:modelValue":l[5]||(l[5]=e=>V.value.frontend.produces=e)},null,8,["modelValue"])])),_:1})])),_:1}),r(b,{class:"box-card"},{header:n((()=>[U])),default:n((()=>[r(u,{label:"服务类型",prop:"backend.type"},{default:n((()=>[r(q,{modelValue:V.value.backend.type,"onUpdate:modelValue":l[6]||(l[6]=e=>V.value.backend.type=e)},{default:n((()=>[r(O,{label:0},{default:n((()=>[i("服务代理")])),_:1}),r(O,{label:1},{default:n((()=>[i("服务注册")])),_:1})])),_:1},8,["modelValue"])])),_:1}),1==V.value.backend.type?(t(),o(u,{key:0,label:"注册配置",prop:"backend.registry"},{default:n((()=>[r(a,{modelValue:V.value.backend.registry,"onUpdate:modelValue":l[7]||(l[7]=e=>V.value.backend.registry=e),type:"textarea"},null,8,["modelValue"])])),_:1})):c("",!0),r(F,{gutter:10},{default:n((()=>[r(L,{span:20,class:"el-col-first el-form-item__label"},{default:n((()=>[i("服务地址 （Does not include path, Example: https://www.baidu.com or http://user-service） ")])),_:1}),r(L,{span:3},{default:n((()=>[r(Q,{onClick:l[8]||(l[8]=f((e=>{V.value.backend.urls.push("")}),["prevent"])),type:"primary"},{default:n((()=>[i("添加")])),_:1})])),_:1})])),_:1}),(t(!0),p(m,null,s(V.value.backend.urls,((e,l)=>(t(),o(F,{gutter:10,key:e[l],label:"url"+l,prop:"backend.urls."+l,style:{"margin-top":"5px","margin-bottom":"5px"}},{default:n((()=>[r(L,{span:20,class:"el-col-first"},{default:n((()=>[r(a,{modelValue:V.value.backend.urls[l],"onUpdate:modelValue":e=>V.value.backend.urls[l]=e,maxlength:"50","show-word-limit":""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),r(L,{span:3},{default:n((()=>[r(Q,{onClick:f((l=>(e=>{const l=V.value.backend.urls.indexOf(e);-1!==l&&V.value.backend.urls.splice(l,1)})(e)),["prevent"]),type:"danger"},{default:n((()=>[i("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["label","prop"])))),128)),r(u,{label:"请求路径",prop:"backend.path"},{default:n((()=>[r(a,{modelValue:V.value.backend.path,"onUpdate:modelValue":l[9]||(l[9]=e=>V.value.backend.path=e)},null,8,["modelValue"])])),_:1}),r(u,{label:"请求方法",prop:"backend.method"},{default:n((()=>[r(_,{modelValue:V.value.backend.method,"onUpdate:modelValue":l[10]||(l[10]=e=>V.value.backend.method=e),placeholder:""},{default:n((()=>[(t(),p(m,null,s(g,((e,l)=>r(v,{key:l,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),r(u,{label:"服务超时",prop:"backend.timeout"},{default:n((()=>[r(N,{modelValue:V.value.backend.timeout,"onUpdate:modelValue":l[11]||(l[11]=e=>V.value.backend.timeout=e),min:0,max:6e5,"controls-position":"right"},null,8,["modelValue"])])),_:1}),r(u,{label:"连接配置",prop:"backend.connection"},{default:n((()=>[r(a,{modelValue:V.value.backend.connection,"onUpdate:modelValue":l[12]||(l[12]=e=>V.value.backend.connection=e),type:"textarea"},null,8,["modelValue"])])),_:1}),r(Y,{"content-position":"left"},{default:n((()=>[i("参数映射")])),_:1}),r(F,{gutter:10},{default:n((()=>[r(L,{span:1}),r(L,{span:5},{default:n((()=>[x])),_:1}),r(L,{span:5},{default:n((()=>[P])),_:1}),r(L,{span:5},{default:n((()=>[E])),_:1}),r(L,{span:5},{default:n((()=>[T])),_:1}),r(L,{span:3},{default:n((()=>[r(Q,{onClick:l[13]||(l[13]=f((e=>{V.value.backend.params.push({})}),["prevent"])),type:"primary"},{default:n((()=>[i("添加")])),_:1})])),_:1})])),_:1}),(t(!0),p(m,null,s(V.value.backend.params,((e,l)=>(t(),o(F,{gutter:10,key:e.key,label:"Domain"+l,prop:"domains."+l+".val",rules:{required:!0,message:"domain can not be null",trigger:"blur"},style:{"margin-top":"5px","margin-bottom":"5px"}},{default:n((()=>[r(L,{span:1}),r(L,{span:5},{default:n((()=>[r(a,{modelValue:e.feParamName,"onUpdate:modelValue":l=>e.feParamName=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),r(L,{span:5},{default:n((()=>[r(_,{modelValue:e.feParamType,"onUpdate:modelValue":l=>e.feParamType=l,placeholder:""},{default:n((()=>[r(v,{label:"PATH",value:"PATH"}),r(v,{label:"QUERY",value:"QUERY"}),r(v,{label:"HEADER",value:"HEADER"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),r(L,{span:5},{default:n((()=>[r(a,{modelValue:e.beParamName,"onUpdate:modelValue":l=>e.beParamName=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),r(L,{span:5},{default:n((()=>[r(_,{modelValue:e.beParamType,"onUpdate:modelValue":l=>e.beParamType=l,placeholder:""},{default:n((()=>[r(v,{label:"PATH",value:"PATH"}),r(v,{label:"QUERY",value:"QUERY"}),r(v,{label:"HEADER",value:"HEADER"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),r(L,{span:3},{default:n((()=>[r(Q,{onClick:f((l=>(e=>{const l=V.value.backend.params.indexOf(e);-1!==l&&V.value.backend.params.splice(l,1)})(e)),["prevent"]),type:"danger"},{default:n((()=>[i("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["label","prop"])))),128))])),_:1}),r(b,{class:"box-card"},{header:n((()=>[R])),default:n((()=>[r(F,{gutter:10},{default:n((()=>[r(L,{span:1}),r(L,{span:5},{default:n((()=>[w])),_:1}),r(L,{span:5},{default:n((()=>[A])),_:1}),r(L,{span:5},{default:n((()=>[C])),_:1}),r(L,{span:5},{default:n((()=>[D])),_:1}),r(L,{span:3},{default:n((()=>[r(Q,{onClick:l[14]||(l[14]=f((e=>{V.value.plugins.push({})}),["prevent"])),type:"primary"},{default:n((()=>[i("添加")])),_:1})])),_:1})])),_:1}),(t(!0),p(m,null,s(V.value.plugins,((e,l)=>(t(),o(F,{gutter:10,key:e.key,label:"plugin"+l,prop:"plugin."+l,rules:{required:!0,message:"domain can not be null",trigger:"blur"},style:{"margin-top":"5px","margin-bottom":"5px"}},{default:n((()=>[r(L,{span:1}),r(L,{span:5},{default:n((()=>[r(a,{modelValue:e.plugin,"onUpdate:modelValue":l=>e.plugin=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),r(L,{span:5},{default:n((()=>[r(_,{modelValue:e.type,"onUpdate:modelValue":l=>e.type=l,placeholder:""},{default:n((()=>[r(v,{label:"Routing",value:"0"}),r(v,{label:"Failure",value:"1"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),r(L,{span:5},{default:n((()=>[r(a,{modelValue:e.order,"onUpdate:modelValue":l=>e.order=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),r(L,{span:5},{default:n((()=>[r(a,{modelValue:e.config,"onUpdate:modelValue":l=>e.config=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),r(L,{span:3},{default:n((()=>[r(Q,{onClick:f((l=>(e=>{const l=V.value.plugins.indexOf(e);-1!==l&&V.value.plugins.splice(l,1)})(e)),["prevent"]),type:"danger"},{default:n((()=>[i("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["label","prop"])))),128))])),_:1})])),_:1})])),_:1},8,["model","rules"])}}}),[["__scopeId","data-v-b5030ce8"]]);export{H as default};
