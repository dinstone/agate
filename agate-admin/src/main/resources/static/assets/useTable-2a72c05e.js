import{d as e,q as t,B as l,o as a,i as n,$ as o,w as s,n as r,a as i,j as d,f as c,t as u,a0 as p,e as f,Q as m,a1 as g,H as h,b as y,y as v,a2 as b,a3 as w,a4 as x,a5 as S,K as O,R as j,k as C,r as z,x as A,z as T,a6 as P,a7 as F,a8 as k,a9 as L,aa as R,Y as N,ab as $,ac as E,ad as I,ae as M,af as _,ag as B}from"./index-5b8751dc.js";/* empty css                *//* empty css                  */import{g as H}from"./tsxHelper-11a4c46e.js";/* empty css                  *//* empty css                         *//* empty css                       */const K={class:"flex items-center"},D={class:"text-16px font-700"},q={class:"max-w-200px"},U={class:"flex pl-20px flex-grow"},W=e({__name:"ContentWrap",props:{title:t.string.def(""),message:t.string.def("")},setup(e){const{getPrefixCls:t}=d(),y=t("content-wrap");return(t,d)=>{const v=l("Icon");return a(),n(i(h),{class:r([i(y)]),shadow:"never"},o({default:s((()=>[c("div",null,[g(t.$slots,"default")])])),_:2},[e.title?{name:"header",fn:s((()=>[c("div",K,[c("span",D,u(e.title),1),e.message?(a(),n(i(p),{key:0,effect:"dark",placement:"right"},{content:s((()=>[c("div",q,u(e.message),1)])),default:s((()=>[f(v,{class:"ml-5px",icon:"bi:question-circle-fill",size:14})])),_:1})):m("",!0),c("div",U,[g(t.$slots,"header")])])])),key:"0"}:void 0]),1032,["class"])}}});const Q=y(),Y=v((()=>Q.sizeMap)),{t:G}=C(),J=e({name:"TableActions",props:{columns:{type:Array,default:()=>[]}},emits:["refresh","changSize"],setup(e,{emit:t}){const l=()=>{t("refresh")},a=e=>{t("changSize",e)};return()=>f(O,null,[f("div",{class:"text-right h-28px flex items-center justify-end"},[f(p,{content:G("common.refresh"),placement:"top"},{default:()=>[f("span",{onClick:l},[f(b,{icon:"ant-design:sync-outlined",class:"cursor-pointer","hover-color":"var(--el-color-primary)"},null)])]}),f(p,{content:G("common.size"),placement:"top"},{default:()=>[f(w,{trigger:"click",onCommand:a},{default:()=>f("span",null,[f(b,{icon:"ant-design:column-height-outlined",class:"cursor-pointer mr-8px ml-8px","hover-color":"var(--el-color-primary)"},null)]),dropdown:()=>f(x,null,{default:()=>i(Y).map((e=>{let t;return f(S,{key:e,command:e},"function"==typeof(l=t=G(`size.${e}`))||"[object Object]"===Object.prototype.toString.call(l)&&!j(l)?t:{default:()=>[t]});var l}))})})]})])])}});function V(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!j(e)}const X=e({name:"Table",props:{pageSize:t.number.def(10),currentPage:t.number.def(1),showAction:t.bool.def(!1),showOverflowTooltip:t.bool.def(!0),columns:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>{}},reserveSelection:t.bool.def(!1),loading:t.bool.def(!1),reserveIndex:t.bool.def(!1),align:t.string.validate((e=>["left","center","right"].includes(e))).def("left"),headerAlign:t.string.validate((e=>["left","center","right"].includes(e))).def("left"),data:{type:Array,default:()=>[]},preview:{type:Array,default:()=>[]},height:t.oneOfType([Number,String]),maxHeight:t.oneOfType([Number,String]),stripe:t.bool.def(!1),border:t.bool.def(!0),size:{type:String,validator:e=>["medium","small","mini"].includes(e)},fit:t.bool.def(!0),showHeader:t.bool.def(!0),highlightCurrentRow:t.bool.def(!1),currentRowKey:t.oneOfType([Number,String]),rowClassName:{type:[Function,String],default:""},rowStyle:{type:[Function,Object],default:()=>{}},cellClassName:{type:[Function,String],default:""},cellStyle:{type:[Function,Object],default:()=>{}},headerRowClassName:{type:[Function,String],default:""},headerRowStyle:{type:[Function,Object],default:()=>{}},headerCellClassName:{type:[Function,String],default:""},headerCellStyle:{type:[Function,Object],default:()=>{}},rowKey:t.string.def("id"),emptyText:t.string.def("No Data"),defaultExpandAll:t.bool.def(!1),expandRowKeys:{type:Array,default:()=>[]},defaultSort:{type:Object,default:()=>({})},tooltipEffect:{type:String,default:"dark"},tooltipOptions:{type:Object,default:()=>({enterable:!0,placement:"top",showArrow:!0,hideAfter:200,popperOptions:{strategy:"fixed"}})},showSummary:t.bool.def(!1),sumText:t.string.def("Sum"),summaryMethod:{type:Function,default:()=>{}},spanMethod:{type:Function,default:()=>{}},selectOnIndeterminate:t.bool.def(!0),indent:t.number.def(16),lazy:t.bool.def(!1),load:{type:Function,default:()=>{}},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",label:"label"})},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:t.bool.def(!1),flexible:t.bool.def(!1)},emits:["update:pageSize","update:currentPage","register","refresh"],setup(e,{attrs:t,emit:l,slots:a,expose:n}){const o=z();A((()=>{const e=i(o);l("register",null==e?void 0:e.$parent,o)}));const s=z(e.pageSize),r=z(e.currentPage),d=z({}),c=z({}),u=v((()=>{const t={...e};return Object.assign(t,i(c)),t})),p=(e={})=>{c.value=Object.assign(i(c),e),d.value={...e}},m=(e,t)=>{var l;const{columns:a}=i(u);for(const n of t||a)for(const t of e)n.field===t.field?N(n,t.path,t.value):(null==(l=n.children)?void 0:l.length)&&m(e,n.children)},g=()=>{l("refresh")},h=e=>{p({size:e})};n({setProps:p,setColumn:m,delColumn:e=>{const{columns:t}=i(u),l=t.findIndex((t=>t.field===e));l>-1&&t.splice(l,1)},addColumn:(e,t)=>{const{columns:l}=i(u);t?l.splice(t,0,e):l.push(e)},elTableRef:o});const y=v((()=>Object.assign({small:!1,background:!1,pagerCount:7,layout:"sizes, prev, pager, next, jumper, ->, total",pageSizes:[10,20,30,40,50,100],disabled:!1,hideOnSinglePage:!1,total:10},i(u).pagination)));T((()=>i(u).pageSize),(e=>{s.value=e})),T((()=>i(u).currentPage),(e=>{r.value=e})),T((()=>s.value),(e=>{l("update:pageSize",e)})),T((()=>r.value),(e=>{l("update:currentPage",e)}));const b=v((()=>{const e={...t,...i(u)};return delete e.columns,delete e.data,e})),w=e=>{const{align:t,headerAlign:l,showOverflowTooltip:a,preview:n}=i(u);return e.map((e=>{var o;if(e.hidden)return null;const s={...e};s.children&&delete s.children;const r=e.children,i={default:(...t)=>{var l,a;const o=t[0];let i=!1;return n.length&&(i=n.some((t=>t===e.field))),r&&r.length?w(r):(null==(l=null==s?void 0:s.slots)?void 0:l.default)?s.slots.default(...t):(null==e?void 0:e.formatter)?null==(a=null==e?void 0:e.formatter)?void 0:a.call(e,o.row,o.column,E(o.row,e.field),o.$index):i?x(E(o.row,e.field)):E(o.row,e.field)}};return(null==(o=null==s?void 0:s.slots)?void 0:o.header)&&(i.header=(...e)=>s.slots.header(...e)),f($,L({showOverflowTooltip:a,align:t,headerAlign:l},s,{prop:e.field}),V(i)?i:{default:()=>[i]})}))},x=e=>f("div",{class:"flex items-center"},[f(I,{src:e,fit:"cover",class:"w-[100%] h-100px",lazy:!0,"preview-src-list":[e],"preview-teleported":!0},null)]);return()=>{const e={};return H(a,"empty")&&(e.empty=(...e)=>H(a,"empty",e)),H(a,"append")&&(e.append=(...e)=>H(a,"append",e)),P(f("div",null,[i(u).showAction?f(J,{columns:i(u).columns,onChangSize:h,onRefresh:g},null):null,f(k,L({ref:o,data:i(u).data},i(b)),{default:()=>(e=>{const{columns:t,reserveIndex:l,pageSize:a,currentPage:n,align:o,headerAlign:s,showOverflowTooltip:r,reserveSelection:d,preview:c}=i(u);return(e||t).map((e=>{var t;if(e.hidden)return null;if("index"===e.type)return f($,{type:"index",index:e.index?e.index:e=>((e,t,l,a)=>{const n=t+1;return e?l*(a-1)+n:n})(l,e,a,n),align:e.align||o,headerAlign:e.headerAlign||s,label:e.label,width:"65px"},null);if("selection"===e.type)return f($,{type:"selection",reserveSelection:d,align:o,headerAlign:s,selectable:e.selectable,width:"50"},null);{const l={...e};l.children&&delete l.children;const a=e.children,n={default:(...t)=>{var n,o;const s=t[0];let r=!1;return c.length&&(r=c.some((t=>t===e.field))),a&&a.length?w(a):(null==(n=null==l?void 0:l.slots)?void 0:n.default)?l.slots.default(...t):(null==e?void 0:e.formatter)?null==(o=null==e?void 0:e.formatter)?void 0:o.call(e,s.row,s.column,E(s.row,e.field),s.$index):r?x(E(s.row,e.field)):E(s.row,e.field)}};return(null==(t=null==l?void 0:l.slots)?void 0:t.header)&&(n.header=(...e)=>l.slots.header(...e)),f($,L({showOverflowTooltip:r,align:o,headerAlign:s},l,{prop:e.field}),V(n)?n:{default:()=>[n]})}}))})(),...e}),i(u).pagination?f(R,L({pageSize:s.value,"onUpdate:pageSize":e=>s.value=e,currentPage:r.value,"onUpdate:currentPage":e=>r.value=e,class:"mt-10px"},i(y)),null):void 0]),[[F("loading"),i(u).loading]])}}}),{t:Z}=C(),ee=e=>{const{immediate:t=!0}=e,l=z(!1),a=z(1),n=z(10),o=z(0),s=z([]);T((()=>a.value),(()=>{u.getList()})),T((()=>n.value),(()=>{1===i(a)||(a.value=1),u.getList()})),A((()=>{t&&u.getList()}));const r=z(),d=z(),c=async()=>{await B();const e=i(r);return e},u={getList:async()=>{l.value=!0;try{const t=await(null==e?void 0:e.fetchDataApi());t&&(s.value=t.list,o.value=t.total||0)}catch(t){}finally{l.value=!1}},setProps:async(e={})=>{const t=await c();null==t||t.setProps(e)},setColumn:async e=>{const t=await c();null==t||t.setColumn(e)},addColumn:async(e,t)=>{const l=await c();null==l||l.addColumn(e,t)},delColumn:async e=>{const t=await c();null==t||t.delColumn(e)},getElTableExpose:async()=>(await c(),i(d)),refresh:()=>{u.getList()},delList:async t=>{const{fetchDelApi:l}=e;l&&M.confirm(Z("common.delMessage"),Z("common.delWarning"),{confirmButtonText:Z("common.delOk"),cancelButtonText:Z("common.delCancel"),type:"warning"}).then((async()=>{if(await l()){_.success(Z("common.delSuccess"));const e=(i(o)%i(n)===t||1===i(n))&&i(a)>1?i(a)-1:i(a);a.value=e,u.getList()}}))}};return{tableRegister:(e,t)=>{r.value=e,d.value=i(t)},tableMethods:u,tableState:{currentPage:a,pageSize:n,total:o,dataList:s,loading:l}}};export{X as _,W as a,ee as u};
