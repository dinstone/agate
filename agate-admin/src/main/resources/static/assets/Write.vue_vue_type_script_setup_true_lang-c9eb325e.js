import{u as e,F as o}from"./useForm-95be4c91.js";import{d as t,s as r,z as s,o as a,i as n,a as p,k as l}from"./index-5b8751dc.js";import{u as m}from"./useValidator-0a43379b.js";import{g as i}from"./gateway-29ace984.js";const c=t({__name:"Write",props:{currentRow:{type:Object,default:()=>null}},setup(t,{expose:c}){const u=t,{t:d}=l(),{required:f}=m(),{formRegister:P,formMethods:b}=e(),{setValues:g,getFormData:w,getElFormExpose:I}=b,x=r([{field:"ccode",label:d("集群"),component:"Select",componentProps:{props:{label:"name",value:"code"}},optionApi:async()=>(await i()).data,formItemProps:{rules:[f()]},colProps:{span:24}},{field:"name",label:d("网关"),component:"Input",formItemProps:{rules:[f()]}},{field:"port",label:d("端口"),component:"InputNumber",componentProps:{controlsPosition:"right"},formItemProps:{rules:[f()]}},{field:"remark",label:d("备注"),component:"Input",componentProps:{type:"textarea",rows:2},colProps:{span:24}},{field:"serverConfig",label:d("服务端配置"),component:"Input",componentProps:{type:"textarea",rows:2},colProps:{span:24}},{field:"clientConfig",label:d("客户端配置"),component:"Input",componentProps:{type:"textarea",rows:2},colProps:{span:24}}]),y=r({ccode:[f()],name:[f()],port:[f()]});return s((()=>u.currentRow),(e=>{e&&g(e)}),{deep:!0,immediate:!0}),c({submit:async()=>{const e=await I();if(await(null==e?void 0:e.validate().catch((e=>{})))){return await w()}}}),(e,t)=>(a(),n(p(o),{rules:y,onRegister:p(P),schema:x},null,8,["rules","onRegister","schema"]))}});export{c as _};
